# Цели

## 1. Регистрация

	{host}/signup

#### Метод: post.

#### Тело:
1. `first_name`
2. `surname`
3. `phone`
4. `password`

#### Успешно:
* Код: `201`
* Тело: `id` - id пользователя

#### Ошибка:
* Код: `422`.
* Тело: ключи - поля с ошибками.


## 2. Авторизация

	{host}/login

#### Метод: post.

#### Тело:
1. `phone`
2. `password`

#### Успешно:
* Код: `200`
* Тело: `token`

#### Ошибки:

Ошибка валидации
* Код: `422`.
* Тело: ключи - поля с ошибками.

Ошибка входа
* Код: `404`
* Тело: `login: "Incorrect login or password"`


##Подтверждение авторизации
Все следующие запросы требуют авторизации.
Для авторизации указывается токен Bearer в заголовке Authorization.

	Authorization: "bearer {{токен}}"

#### Ошибка:
Вызывается в запросах при отсутствии правильного токена.
* Код: `403`
* Тело: `message: "You need authorization"`


## 3. Выход

	{host}/logout

#### Успешно:
* Код: `200`


## 4. Загрузка фотографии

	{host}/photo

#### Метод: post.
#### Content-Type: FormData

#### Тело:
1. `photo` - jpg, jpeg или png

#### Успешно:
* Код: `201`
* Тело:
1. `id`
2. `name` - название фото
3. `url` - абсолютная ссылка на фото

#### Ошибки:

Ошибка валидации
* Код: `422`.
* Тело: ключи - поля с ошибками.


## 5. Изменение фотографии

	{host}/photo/{id}

#### Метод: post.

#### Тело:
1. `_method` - поле, со значением "patch", без кавычек
2. *`name`
3. *`photo` - base64

#### Успешно:
* Код: `200`
* Тело:
1. `id`
2. `name` - название фото
3. `url` - абсолютная ссылка на фото

#### Ошибки:

Ошибка валидации
* Код: `422`.
* Тело: ключи - поля с ошибками.

При изменении не своей фотографии.
* Код: `403`
* Тело: -


## 6. Получение фотографий

	{host}/photo

#### Метод: get.

#### Тело: -

#### Успешно:
* Код: `200`
* Тело: массив с объектами. Поля объекта:
1. `id`
2. `name` - название фото
3. `url` - абсолютная ссылка на фото
4. `owner_id` - владелец фото
5. `users` - имеющие доступ, массив с id


## 7. Получение одной фотографии

	{host}/photo/{id}

#### Метод: get.

#### Тело: -

#### Успешно:
* Код: `200`
* Тело:
1. `id`
2. `name` - название фото
3. `url` - абсолютная ссылка на фото
4. `owner_id` - владелец фото
5. `users` - имеющие доступ, массив с id


## 8. Удаление фотографии

	{host}/photo/{id}

#### Метод: delete.

#### Тело:
1. `_method` - поле, со значением "patch", без кавычек
2. *`name`
3. *`photo` - base64

#### Успешно:
* Код: `204`
* Тело: -

#### Ошибки:
При удалении не своей фотографии.
* Код: `403`
* Тело: -


## 9. Шаринг фотографий

	{host}/user/{ID}/share

#### Метод: post.

#### Тело:
1. `photos[]` - индентификаторы фото.

#### Успешно:
* Код: `201`
* Тело:
1. `existing_photos[]` - id фотографий, которые уже есть на сервере


## 10. Поиск пользователей

	{host}/user

#### Метод: get.

#### Тело:
1. `search` - строка запроса.

#### Успешно:
* Код: `200`
* Тело: `[]`:
1. `id`
2. `first_name`
3. `surname`
4. `phone`

